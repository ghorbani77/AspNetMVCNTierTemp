@* Generator: MvcHelper GeneratePrettyNames: true *@

@using AttributeRouting.Helpers
@using MVC5.Common.Controller.Alerts
@using MVC5.Common.Helpers.Extentions

@*for using razor generator after creating htmlhlper and run Enable-RazorGenerator
    you should change build action of generated class to complie *@


@helper ShowToastMessages(Toastr toastr)
{
    if (toastr == null)
    {
        return;
    }
    <script>
    $(function () {
        toastr.options.closeButton = '@toastr.ShowCloseButton';
        toastr.options.newestOnTop = '@toastr.ShowNewestOnTop';
        toastr.options.progressBar = '@toastr.ProgressBar';
        @foreach (var message in toastr.ToastMessages)
        {
            var toastTypeValue = message.AlertType.ToLower();
            @:var optionsOverride = { /* Add message specific options here */ };
                    if (message.IsSticky)
            {
                <text>optionsOverride.timeOut = 0;
        optionsOverride.extendedTimeout = 0;</text>
            }

            if (message.Title.HasValueOrEmpty())
            {
                @:toastr['@toastTypeValue']('@message.Message', '@message.Title', optionsOverride);
            }
            else
            {
                @:toastr['@toastTypeValue']('@message.Message', optionsOverride);
            }
        }
    });
    </script>
}